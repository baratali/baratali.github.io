<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-04-20 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>checkstyle &#x2013; Writing Javadoc Checks</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20160420" />
    <meta http-equiv="Content-Language" content="en" />
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="js/anchors.js"></script><script type="text/javascript" src="js/google-analytics.js"></script><link rel="icon" href="images/favicon.png" type="image/x-icon" /><link rel="shortcut icon" href="images/favicon.ico" type="image/ico" />
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="./" id="bannerLeft" title="Checkstyle">
                                                <img src="images/header-checkstyle-logo.png" alt="Checkstyle" />
                </a>
                                            <a href="./" id="bannerRight" title="Checkstyle">
                                                <img src="images/header-right-ruller.png" alt="Checkstyle" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                  <div class="xright">        
                    
                 <span id="publishDate">Last Published: 2016-04-20</span>
              &nbsp;| <span id="projectVersion">Version: 6.18-SNAPSHOT</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>About</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Checkstyle">Checkstyle</a>
            </li>
                  <li class="none">
                          <a href="releasenotes.html" title="Release Notes">Release Notes</a>
            </li>
                  <li class="none">
                          <a href="consulting.html" title="Consulting">Consulting</a>
            </li>
                  <li class="none">
                          <a href="sponsoring.html" title="Sponsoring">Sponsoring</a>
            </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                                                                                <li class="expanded">
                          <a href="config.html" title="Configuration">Configuration</a>
                    <ul>
                      <li class="none">
                          <a href="property_types.html" title="Property Types">Property Types</a>
            </li>
                      <li class="none">
                          <a href="config_filters.html" title="Filters">Filters</a>
            </li>
              </ul>
        </li>
                                                                                <li class="expanded">
                          <a href="running.html" title="Running">Running</a>
                    <ul>
                      <li class="none">
                          <a href="anttask.html" title="Ant Task">Ant Task</a>
            </li>
                      <li class="none">
                          <a href="cmdline.html" title="Command Line">Command Line</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                                                                                                        <li class="expanded">
                          <a href="checks.html" title="Checks">Checks</a>
                    <ul>
                      <li class="none">
                          <a href="config_annotation.html" title="Annotations">Annotations</a>
            </li>
                      <li class="none">
                          <a href="config_blocks.html" title="Block Checks">Block Checks</a>
            </li>
                      <li class="none">
                          <a href="config_design.html" title="Class Design">Class Design</a>
            </li>
                      <li class="none">
                          <a href="config_coding.html" title="Coding">Coding</a>
            </li>
                      <li class="none">
                          <a href="config_header.html" title="Headers">Headers</a>
            </li>
                      <li class="none">
                          <a href="config_imports.html" title="Imports">Imports</a>
            </li>
                      <li class="none">
                          <a href="config_javadoc.html" title="Javadoc Comments">Javadoc Comments</a>
            </li>
                      <li class="none">
                          <a href="config_metrics.html" title="Metrics">Metrics</a>
            </li>
                      <li class="none">
                          <a href="config_misc.html" title="Miscellaneous">Miscellaneous</a>
            </li>
                      <li class="none">
                          <a href="config_modifier.html" title="Modifiers">Modifiers</a>
            </li>
                      <li class="none">
                          <a href="config_naming.html" title="Naming Conventions">Naming Conventions</a>
            </li>
                      <li class="none">
                          <a href="config_regexp.html" title="Regexp">Regexp</a>
            </li>
                      <li class="none">
                          <a href="config_sizes.html" title="Size Violations">Size Violations</a>
            </li>
                      <li class="none">
                          <a href="config_whitespace.html" title="Whitespace">Whitespace</a>
            </li>
              </ul>
        </li>
                                                                                <li class="expanded">
                          <a href="style_configs.html" title="Style Configurations">Style Configurations</a>
                    <ul>
                      <li class="none">
                          <a href="google_style.html" title="Google's Style">Google's Style</a>
            </li>
                      <li class="none">
                          <a href="sun_style.html" title="Sun's Style">Sun's Style</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Developers</h5>
                  <ul>
                                                                                                                              <li class="expanded">
                          <a href="extending.html" title="Extending Checkstyle">Extending Checkstyle</a>
                    <ul>
                      <li class="none">
                          <a href="writingchecks.html" title="Writing Checks">Writing Checks</a>
            </li>
                      <li class="none">
            <strong>Writing Javadoc Checks</strong>
          </li>
                      <li class="none">
                          <a href="writingfilters.html" title="Writing Filters">Writing Filters</a>
            </li>
                      <li class="none">
                          <a href="writinglisteners.html" title="Writing Listeners">Writing Listeners</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="contributing.html" title="Contributing">Contributing</a>
            </li>
                                                                                                  <li class="expanded">
                          <a href="beginning_development.html" title="Beginning Development">Beginning Development</a>
                    <ul>
                      <li class="none">
                          <a href="eclipse.html" title="Eclipse IDE">Eclipse IDE</a>
            </li>
                      <li class="none">
                          <a href="netbeans.html" title="NetBeans IDE">NetBeans IDE</a>
            </li>
                      <li class="none">
                          <a href="idea.html" title="IntelliJ IDE">IntelliJ IDE</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="Javadoc">Javadoc</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                                     <a href="https://github.com/checkstyle/checkstyle" title="GitHub" class="poweredBy">
        <img class="poweredBy"  alt="GitHub" src="images/github_logo_social_coding_outlined.png"     />
      </a>
                                                                                                                      <a href="https://sourceforge.net/projects/checkstyle/" title="SourceForge" class="poweredBy">
        <img class="poweredBy"  alt="SourceForge" src="images/sflogo.gif"     />
      </a>
                                                                                                                      <a href="https://twitter.com/checkstyle_java/" title="Twitter" class="poweredBy">
        <img class="poweredBy"  alt="Twitter" src="images/twitter_button.png"     />
      </a>
                                                                                                                      <a href="http://stackoverflow.com/questions/tagged/checkstyle" title="Stackoverflow" class="poweredBy">
        <img class="poweredBy"  alt="Stackoverflow" src="images/stackoverflow.jpeg"     />
      </a>
                                                                                                                      <a href="https://groups.google.com/forum/#!forum/checkstyle" title="GoogleGroups" class="poweredBy">
        <img class="poweredBy"  alt="GoogleGroups" src="images/groups.png"     />
      </a>
                                                                                                                      <a href="https://sourceforge.net/p/checkstyle/news/feed" title="Rss" class="poweredBy">
        <img class="poweredBy"  alt="Rss" src="images/rss-long.png"     />
      </a>
                                                                                                                      <a href="https://plus.google.com/108692338295483568100/posts" title="Google+" class="poweredBy">
        <img class="poweredBy"  alt="Google+" src="images/Google-Plus-Logo-120x38.png"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

  
    
<div class="section">
<h2><a name="Content"></a>Content</h2>
      
        
        
      
<ul>
<li><a href="#Content">Content</a></li>
<li><a href="#Overview">Overview</a></li>
<li><a href="#Difference_between_Java_Grammar_and_Javadoc_comments_Grammar">Difference between Java Grammar and Javadoc comments Grammar</a></li>
<li><a href="#Tools_to_see_Javadoc_tree_structure">Tools to see Javadoc tree structure</a></li>
<li><a href="#Token_types">Token types</a></li>
<li><a href="#HTML_code_in_Javadoc_comments">HTML code in Javadoc comments</a></li>
<li><a href="#Checkstyle_SDK_GUI">Checkstyle SDK GUI</a></li>
<li><a href="#Access_Java_AST_from_Javadoc_Check">Access Java AST from Javadoc Check</a></li>
<li><a href="#Integrating_new_Javadoc_Check">Integrating new Javadoc Check</a></li></ul>
    </div>

    
<div class="section">
<h2><a name="Overview"></a>Overview</h2>
      
<p>
      To start implementing your own Check create new class and extend AbstractJavadocCheck. It has two abstract methods:
      </p>
      
<ul>
        
<li>getDefaultJavadocTokens() - return array of token types that your new Check requires to process (see &quot;Token Types&quot; section)</li>
        
<li>visitJavadocToken(DetailNode) - it's the place you should put tree nodes proccessing. The argument is Javadoc tree node of type you described 
          before in getDefaultJavadocTokens() method.</li>
      </ul>
      
<p>
        Javadoc parser requires XHTML to be used in Javadoc comments, i.e. if there is some open tag(for example &lt;div&gt;) then there have to be its close tag &lt;/div&gt;.
        This means that if Javadoc comment has incorrect XHTML structure then Javadoc Parser will fail processing the comment, therefore, your new Check can't get its parse tree and process anything from this Javadoc comment. For more details and examples go to &quot;HTML code in Javadoc comments&quot; section.
      </p>
    </div>

    
<div class="section">
<h2><a name="Difference_between_Java_Grammar_and_Javadoc_comments_Grammar"></a>Difference between Java Grammar and Javadoc comments Grammar</h2>
      
<p>
        Java grammar parses java file due to language specifications. So, there are singleline comments and multiline/block comments in it. Java compiler doesn't know about Javadoc because it is just a multiline comment.
        To parse multiline comment as a Javadoc comment, checkstyle has second grammar - Javadoc grammar. So, it's supposed to proccess block comments and parse them to Abstract Syntax Tree.
        The problem is that Java grammar is old one and uses ANTLR v2, while Javadoc grammar uses ANTLR v4. Because of that, these two grammars and their trees are not compatible.
        Java AST consists of DetailAST objects, while Javadoc AST consists of DetailNode objects.
      </p>
    </div>

    
<div class="section">
<h2><a name="Tools_to_see_Javadoc_tree_structure"></a>Tools to see Javadoc tree structure</h2>
      
<p>
      Checkstyle can print Abstract Syntax Tree including Javadoc trees. You need to run checkstyle jar file with <b>-J</b> argument, providing java file.
      </p>
      
<p>For example, here is java file:</p>
      
<div class="source">
<pre>
/**
 * My &lt;b&gt;class&lt;/b&gt;.
 * @see AbstractClass
 */
public class MyClass {

}
      </pre></div>
      
<p>Command:</p>
      
<div class="source">
<pre>java -jar checkstyle-6.18-all.jar -J MyClass.java</pre></div>
      
<p>Output:</p>
      
<div class="source">
<pre>
CLASS_DEF -&gt; CLASS_DEF [5:0]
|--MODIFIERS -&gt; MODIFIERS [5:0]
|   |--JAVADOC -&gt; \r\n * My &lt;b&gt;class&lt;/b&gt;.\r\n * @see AbstractClass\r\n &lt;EOF&gt; [1:0]
|   |   |--NEWLINE -&gt; \r\n [1:0]
|   |   |--LEADING_ASTERISK -&gt;  * [2:0]
|   |   |--TEXT -&gt;  My  [2:2]
|   |   |   |--WS -&gt;   [2:2]
|   |   |   |--CHAR -&gt; M [2:3]
|   |   |   |--CHAR -&gt; y [2:4]
|   |   |   `--WS -&gt;   [2:5]
|   |   |--HTML_ELEMENT -&gt; &lt;b&gt;class&lt;/b&gt; [2:6]
|   |   |   `--HTML_TAG -&gt; &lt;b&gt;class&lt;/b&gt; [2:6]
|   |   |       |--HTML_ELEMENT_OPEN -&gt; &lt;b&gt; [2:6]
|   |   |       |   |--OPEN -&gt; &lt; [2:6]
|   |   |       |   |--HTML_TAG_NAME -&gt; b [2:7]
|   |   |       |   `--CLOSE -&gt; &gt; [2:8]
|   |   |       |--TEXT -&gt; class [2:9]
|   |   |       |   |--CHAR -&gt; c [2:9]
|   |   |       |   |--CHAR -&gt; l [2:10]
|   |   |       |   |--CHAR -&gt; a [2:11]
|   |   |       |   |--CHAR -&gt; s [2:12]
|   |   |       |   `--CHAR -&gt; s [2:13]
|   |   |       `--HTML_ELEMENT_CLOSE -&gt; &lt;/b&gt; [2:14]
|   |   |           |--OPEN -&gt; &lt; [2:14]
|   |   |           |--SLASH -&gt; / [2:15]
|   |   |           |--HTML_TAG_NAME -&gt; b [2:16]
|   |   |           `--CLOSE -&gt; &gt; [2:17]
|   |   |--TEXT -&gt; . [2:18]
|   |   |   `--CHAR -&gt; . [2:18]
|   |   |--NEWLINE -&gt; \r\n [2:19]
|   |   |--LEADING_ASTERISK -&gt;  * [3:0]
|   |   |--WS -&gt;   [3:2]
|   |   |--JAVADOC_TAG -&gt; @see AbstractClass\r\n  [3:3]
|   |   |   |--SEE_LITERAL -&gt; @see [3:3]
|   |   |   |--WS -&gt;   [3:7]
|   |   |   |--REFERENCE -&gt; AbstractClass [3:8]
|   |   |   |   `--CLASS -&gt; AbstractClass [3:8]
|   |   |   |--NEWLINE -&gt; \r\n [3:21]
|   |   |   `--WS -&gt;   [4:0]
|   |   `--EOF -&gt; &lt;EOF&gt; [4:1]
|   `--LITERAL_PUBLIC -&gt; public [5:0]
|--LITERAL_CLASS -&gt; class [5:7]
|--IDENT -&gt; MyClass [5:13]
`--OBJBLOCK -&gt; OBJBLOCK [5:21]
    |--LCURLY -&gt; { [5:21]
    `--RCURLY -&gt; } [7:0]
      </pre></div>
      
<p>
      As you see very small java file transforms to a huge Abstract Syntax Tree, because that is the most detailed tree including all components of the java file: classes, methods, comments, etc.
      But in most cases while developing Javadoc Check you need only parse tree of the exact Javadoc comment.
      To do that just copy Javadoc comment to separate file and remove <b>/**</b> at the begining and <b>*/</b> at the end. After that, run checkstyle with <b>-j</b> argument.
      </p>
      
<p>File:</p>
      
<div class="source">
<pre>
 * My &lt;b&gt;class&lt;/b&gt;.
 * @see AbstractClass
      </pre></div>
      
<p>Command:</p>
      
<div class="source">
<pre>java -jar checkstyle-6.18-SNAPSHOT-all.jar -j MyJavadocComment.javadoc</pre></div>
      
<p>Output:</p>
      
<div class="source">
<pre>
JAVADOC -&gt;  * My &lt;b&gt;class&lt;/b&gt;.\r\n * @see AbstractClass&lt;EOF&gt; [0:0]
|--LEADING_ASTERISK -&gt;  * [0:0]
|--TEXT -&gt;  My  [0:2]
|   |--WS -&gt;   [0:2]
|   |--CHAR -&gt; M [0:3]
|   |--CHAR -&gt; y [0:4]
|   `--WS -&gt;   [0:5]
|--HTML_ELEMENT -&gt; &lt;b&gt;class&lt;/b&gt; [0:6]
|   `--HTML_TAG -&gt; &lt;b&gt;class&lt;/b&gt; [0:6]
|       |--HTML_ELEMENT_OPEN -&gt; &lt;b&gt; [0:6]
|       |   |--OPEN -&gt; &lt; [0:6]
|       |   |--HTML_TAG_NAME -&gt; b [0:7]
|       |   `--CLOSE -&gt; &gt; [0:8]
|       |--TEXT -&gt; class [0:9]
|       |   |--CHAR -&gt; c [0:9]
|       |   |--CHAR -&gt; l [0:10]
|       |   |--CHAR -&gt; a [0:11]
|       |   |--CHAR -&gt; s [0:12]
|       |   `--CHAR -&gt; s [0:13]
|       `--HTML_ELEMENT_CLOSE -&gt; &lt;/b&gt; [0:14]
|           |--OPEN -&gt; &lt; [0:14]
|           |--SLASH -&gt; / [0:15]
|           |--HTML_TAG_NAME -&gt; b [0:16]
|           `--CLOSE -&gt; &gt; [0:17]
|--TEXT -&gt; . [0:18]
|   `--CHAR -&gt; . [0:18]
|--NEWLINE -&gt; \r\n [0:19]
|--LEADING_ASTERISK -&gt;  * [1:0]
|--WS -&gt;   [1:2]
|--JAVADOC_TAG -&gt; @see AbstractClass [1:3]
|   |--SEE_LITERAL -&gt; @see [1:3]
|   |--WS -&gt;   [1:7]
|   `--REFERENCE -&gt; AbstractClass [1:8]
|       `--CLASS -&gt; AbstractClass [1:8]
`--EOF -&gt; &lt;EOF&gt; [1:21]
      </pre></div>
    </div>

    
<div class="section">
<h2><a name="Token_types"></a>Token types</h2>
    </div>

    
<div class="section">
<h2><a name="HTML_code_in_Javadoc_comments"></a>HTML code in Javadoc comments</h2>
    </div>

    
<div class="section">
<h2><a name="Checkstyle_SDK_GUI"></a>Checkstyle SDK GUI</h2>
    </div>

    
<div class="section">
<h2><a name="Access_Java_AST_from_Javadoc_Check"></a>Access Java AST from Javadoc Check</h2>
    </div>

    
<div class="section">
<h2><a name="Integrating_new_Javadoc_Check"></a>Integrating new Javadoc Check</h2>
    </div>

  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2001&#x2013;2016.
          All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
